# mini-route
前端路由两种实现原理

### 什么是路由
 > 先看一下路由的响应过程：  
 > 1、浏览器发出请求  
 > 2、服务器监听到端口有请求过来，并解析url路径  
 > 3、根据服务器的路由配置，返回相应的信息（html字符串 | json数据 | 图片）  
 > 4、浏览器根据数据包的Content-Type来决定如何解析数据  
 > 路由就是用来跟服务器进行交互的一种方式，通过不同的路径，来请求不同的支援。  

### Hash路由
 > 主要通过监听url中的hash值的变化进行路由跳转。输入路径，  
 > 一、判断跳转类型。1.刷新页面 2.直接输入链接跳转 3.浏览器历史返回；2和3情况会触发hashchange事件，1情况不会触发hashchange而是load时间代替。  
 > 二、解析当前url,当匹配不到的时候，需要重定向  
 > 三、获取路径页面的内容，替换当前页面的内容。  
 > 四、成功跳转到当前页面

 ### HTML5新路由方案（history API）
 HTML5路由标准，pushState和replaceState,通过这两个API可以改变URL地址且不会发送请求。同时还有监听onpopstate事件。  
 > 一、判断跳转类型：1.刷新页面或直接输入链接跳转；2.通过浏览器历史返回；3.通过pushState跳转；情况1会向浏览器发送请求，所以需要服务器做重定向，然后触发load事件，
      情况2触发popstate事件，情况3pushstate会改变url且不会向浏览器发送请求。  
 > 二、解析当前url，跳转页面  
 > 三、和hash路由的步骤3和步骤4一样。  
